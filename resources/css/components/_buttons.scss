$btn-radius-pill: 100px;

$btn-sizes: (
  sm: (height: 24px, py: 4px,  px: 12px, gap: 4px),
  md: (height: 36px, py: 8px,  px: 16px, gap: 6px),
  lg: (height: 44px, py: 12px, px: 20px, gap: 8px),
);

@mixin btn-size($size) {
  $cfg: map-get($btn-sizes, $size);
  height: map-get($cfg, height);
  padding: map-get($cfg, py) map-get($cfg, px);
  gap: map-get($cfg, gap);
}

@mixin bs-btn-variant($cfg) {
  --bs-btn-color: #{map-get($cfg, color)};
  --bs-btn-bg: #{map-get($cfg, bg)};
  --bs-btn-border-color: #{map-get($cfg, border)};

  --bs-btn-hover-color: #{map-get($cfg, hover-color)};
  --bs-btn-hover-bg: #{map-get($cfg, hover-bg)};
  --bs-btn-hover-border-color: #{map-get($cfg, hover-border)};

  --bs-btn-active-color: #{map-get($cfg, active-color)};
  --bs-btn-active-bg: #{map-get($cfg, active-bg)};
  --bs-btn-active-border-color: #{map-get($cfg, active-border)};

  --bs-btn-disabled-color: #{map-get($cfg, disabled-color)};
  --bs-btn-disabled-bg: #{map-get($cfg, disabled-bg)};
  --bs-btn-disabled-border-color: #{map-get($cfg, disabled-border)};
}

@mixin btn-text($color, $hover, $disabled) {
  color: #{$color};
  text-decoration: none;

  --bs-btn-color: #{$color};
  --bs-btn-hover-color: #{$hover};
  --bs-btn-active-color: #{$hover};

  --bs-btn-bg: transparent;
  --bs-btn-border-color: transparent;

  --bs-btn-hover-bg: transparent;
  --bs-btn-active-bg: transparent;

  --bs-btn-disabled-color: #{$disabled};
  --bs-btn-disabled-bg: transparent;
  --bs-btn-disabled-border-color: transparent;

  &:hover,
  &:focus,
  &:active,
  &:focus-visible {
    color: #{$hover};
    text-decoration: none;
  }

  &:disabled,
  &.disabled {
    color: #{$disabled};
    pointer-events: none;
    text-decoration: none;
  }
}

.btn {
  border-radius: $btn-radius-pill;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  line-height: normal;

  @include btn-size(md);

  --bs-btn-focus-shadow-rgb: 0, 0, 0;

  > span {
    display: inline-flex;
    align-items: center;
  }

  .spinner-border {
    width: 1em;
    height: 1em;
  }

  &:focus,
  &:focus-visible {
    box-shadow: none;
    outline: none;
  }
}

.btn-sm { @include btn-size(sm); }
.btn-lg { @include btn-size(lg); }

.btn,
.btn {
  svg {
    width: 1em;
    height: 1em;
    flex-shrink: 0;
    stroke: currentColor;
    fill: currentColor;
  }
}

$btn-primary: (
  color: map-get($custom-colors, "black"),
  bg: map-get($custom-colors, "yellow"),
  border: map-get($custom-colors, "yellow"),

  hover-color: map-get($custom-colors, "black"),
  hover-bg: map-get($custom-colors, "yellow-dark"),
  hover-border: map-get($custom-colors, "yellow-dark"),

  active-color: map-get($custom-colors, "black"),
  active-bg: map-get($custom-colors, "yellow-dark"),
  active-border: map-get($custom-colors, "yellow-dark"),

  disabled-color: map-get($custom-colors, "grey-2"),
  disabled-bg: map-get($custom-colors, "grey-5"),
  disabled-border: map-get($custom-colors, "grey-5"),
);

$btn-secondary: map-merge(
  $btn-primary,
  (
    bg: map-get($custom-colors, "grey-5"),
    border: map-get($custom-colors, "grey-5"),
    hover-bg: map-get($custom-colors, "grey-4"),
    hover-border: map-get($custom-colors, "grey-4"),
    active-bg: map-get($custom-colors, "grey-4"),
    active-border: map-get($custom-colors, "grey-4"),
  )
);

.btn-primary   { @include bs-btn-variant($btn-primary); }
.btn-secondary { @include bs-btn-variant($btn-secondary); }

.btn-danger {
  @include bs-btn-variant((
    color: #fff,
    bg: map-get($custom-colors, "red"),
    border: map-get($custom-colors, "red"),

    hover-color: #fff,
    hover-bg: map-get($custom-colors, "red-dark"),
    hover-border: map-get($custom-colors, "red-dark"),

    active-color: #fff,
    active-bg: map-get($custom-colors, "red-dark"),
    active-border: map-get($custom-colors, "red-dark"),

    disabled-color: map-get($custom-colors, "grey-2"),
    disabled-bg: map-get($custom-colors, "grey-5"),
    disabled-border: map-get($custom-colors, "grey-5"),
  ));
}

.btn-outline-primary {
  --bs-btn-bg: transparent;
  --bs-btn-border-width: 1px;

  @include bs-btn-variant((
    color: map-get($custom-colors, "black"),
    bg: transparent,
    border: map-get($custom-colors, "grey-4"),

    hover-color: map-get($custom-colors, "black"),
    hover-bg: transparent,
    hover-border: map-get($custom-colors, "grey-2"),

    active-color: map-get($custom-colors, "black"),
    active-bg: transparent,
    active-border: map-get($custom-colors, "grey-2"),

    disabled-color: map-get($custom-colors, "grey-2"),
    disabled-bg: transparent,
    disabled-border: map-get($custom-colors, "grey-5"),
  ));
}

.btn-string {
  @include btn-text(
    map-get($custom-colors, "grey-2"),
    map-get($custom-colors, "grey-1"),
    map-get($custom-colors, "grey-3")
  );
}

.btn-danger-string {
  @include btn-text(
    map-get($custom-colors, "red"),
    map-get($custom-colors, "red-dark"),
    map-get($custom-colors, "grey-3")
  );
}

.btn-primary,
.btn-secondary,
.btn-danger,
.btn-outline-primary,
.btn-string,
.btn-danger-string {
  background-image: none;
}
